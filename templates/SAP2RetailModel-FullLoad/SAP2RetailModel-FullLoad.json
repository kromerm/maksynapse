{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name"
		},
		"ClassificationADLS": {
			"type": "string"
		},
		"LinkToADO": {
			"type": "string"
		},
		"LinkToGit": {
			"type": "string"
		},
		"AzureSynapseAnalyticsSQLPool": {
			"type": "string"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/ProcessADOData')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "CopyBugs",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "LoadADOWorkItems",
								"type": "DatasetReference",
								"parameters": {
									"WorkItem": "Bug"
								}
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "Bugs"
								}
							}
						]
					},
					{
						"name": "TransformADOData",
						"type": "ExecuteDataFlow",
						"dependsOn": [
							{
								"activity": "CopyBugs",
								"dependencyConditions": [
									"Succeeded"
								]
							},
							{
								"activity": "CopyTasks",
								"dependencyConditions": [
									"Succeeded"
								]
							},
							{
								"activity": "CopyFeatures",
								"dependencyConditions": [
									"Succeeded"
								]
							},
							{
								"activity": "CopyUserStories",
								"dependencyConditions": [
									"Succeeded"
								]
							},
							{
								"activity": "CopyUsers",
								"dependencyConditions": [
									"Succeeded"
								]
							},
							{
								"activity": "CopyGitData",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"dataflow": {
								"referenceName": "TransformADOData",
								"type": "DataFlowReference",
								"datasetParameters": {
									"ADOBugsJson": {
										"WorkItemType": "Bugs"
									},
									"ADOTasksJsonData": {
										"WorkItemType": "Tasks"
									},
									"ADOFeaturesJsonData": {
										"WorkItemType": "Features"
									},
									"ADOUserStoryJsonData": {
										"WorkItemType": "UserStory"
									}
								}
							},
							"staging": {
								"linkedService": {
									"referenceName": "[parameters('ClassificationADLS')]",
									"type": "LinkedServiceReference"
								},
								"folderPath": "wpawkspfs2/classification"
							},
							"compute": {
								"coreCount": 8,
								"computeType": "General"
							},
							"traceLevel": "Fine"
						}
					},
					{
						"name": "CopyTasks",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "LoadADOWorkItems",
								"type": "DatasetReference",
								"parameters": {
									"WorkItem": "Task"
								}
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "Tasks"
								}
							}
						]
					},
					{
						"name": "CopyFeatures",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "LoadADOWorkItems",
								"type": "DatasetReference",
								"parameters": {
									"WorkItem": "Feature"
								}
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "Features"
								}
							}
						]
					},
					{
						"name": "CopyUserStories",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "LoadADOWorkItems",
								"type": "DatasetReference",
								"parameters": {
									"WorkItem": "User Story"
								}
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "UserStory"
								}
							}
						]
					},
					{
						"name": "CopyUsers",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "ADOUserDataSet",
								"type": "DatasetReference"
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "User"
								}
							}
						]
					},
					{
						"name": "CopyGitData",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobFSWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings"
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "GetGItJsonData",
								"type": "DatasetReference"
							}
						],
						"outputs": [
							{
								"referenceName": "ADOWorkItemJson",
								"type": "DatasetReference",
								"parameters": {
									"WorkItemType": "Git"
								}
							}
						]
					}
				],
				"folder": {
					"name": "ADOPullPipeline"
				},
				"annotations": [],
				"lastPublishTime": "2021-03-30T17:25:52Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/datasets/LoadADOWorkItems')]",
				"[concat(variables('factoryId'), '/datasets/ADOWorkItemJson')]",
				"[concat(variables('factoryId'), '/dataflows/TransformADOData')]",
				"[concat(variables('factoryId'), '/datasets/ADOUserDataSet')]",
				"[concat(variables('factoryId'), '/datasets/GetGItJsonData')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/LoadADOWorkItems')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('LinkToADO')]",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"WorkItem": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {
					"relativeUrl": {
						"value": "@concat('WorkItems?&$filter=WorkItemType eq ','''',dataset().WorkItem,'''')",
						"type": "Expression"
					}
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ADOWorkItemJson')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('ClassificationADLS')]",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"WorkItemType": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat(dataset().WorkItemType,'Data.json')",
							"type": "Expression"
						},
						"folderPath": "raw",
						"fileSystem": "wpawkspfs2"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"value": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"WorkItemId": {
										"type": "integer"
									},
									"InProgressDate": {
										"type": "string"
									},
									"CompletedDate": {
										"type": "string"
									},
									"LeadTimeDays": {
										"type": "number"
									},
									"CycleTimeDays": {
										"type": "number"
									},
									"InProgressDateSK": {
										"type": "integer"
									},
									"CompletedDateSK": {
										"type": "integer"
									},
									"AnalyticsUpdatedDate": {
										"type": "string"
									},
									"ProjectSK": {
										"type": "string"
									},
									"WorkItemRevisionSK": {
										"type": "integer"
									},
									"AreaSK": {
										"type": "string"
									},
									"IterationSK": {
										"type": "string"
									},
									"AssignedToUserSK": {
										"type": "string"
									},
									"ChangedByUserSK": {
										"type": "string"
									},
									"CreatedByUserSK": {
										"type": "string"
									},
									"ActivatedByUserSK": {
										"type": "string"
									},
									"ClosedByUserSK": {
										"type": "string"
									},
									"ResolvedByUserSK": {
										"type": "string"
									},
									"ActivatedDateSK": {
										"type": "integer"
									},
									"ChangedDateSK": {
										"type": "integer"
									},
									"ClosedDateSK": {
										"type": "integer"
									},
									"CreatedDateSK": {
										"type": "integer"
									},
									"ResolvedDateSK": {
										"type": "integer"
									},
									"StateChangeDateSK": {
										"type": "integer"
									},
									"Revision": {
										"type": "integer"
									},
									"Watermark": {
										"type": "integer"
									},
									"Title": {
										"type": "string"
									},
									"WorkItemType": {
										"type": "string"
									},
									"ChangedDate": {
										"type": "string"
									},
									"CreatedDate": {
										"type": "string"
									},
									"State": {
										"type": "string"
									},
									"Reason": {
										"type": "string"
									},
									"FoundIn": {
										"type": "null"
									},
									"IntegrationBuild": {
										"type": "null"
									},
									"ActivatedDate": {
										"type": "string"
									},
									"Activity": {
										"type": "null"
									},
									"BusinessValue": {
										"type": "null"
									},
									"ClosedDate": {
										"type": "string"
									},
									"Issue": {
										"type": "null"
									},
									"Priority": {
										"type": "integer"
									},
									"Rating": {
										"type": "null"
									},
									"ResolvedDate": {
										"type": "string"
									},
									"ResolvedReason": {
										"type": "string"
									},
									"Risk": {
										"type": "null"
									},
									"Severity": {
										"type": "string"
									},
									"StackRank": {
										"type": "null"
									},
									"TimeCriticality": {
										"type": "null"
									},
									"ValueArea": {
										"type": "string"
									},
									"CompletedWork": {
										"type": "null"
									},
									"DueDate": {
										"type": "null"
									},
									"Effort": {
										"type": "null"
									},
									"FinishDate": {
										"type": "null"
									},
									"OriginalEstimate": {
										"type": "null"
									},
									"RemainingWork": {
										"type": "null"
									},
									"StartDate": {
										"type": "null"
									},
									"StoryPoints": {
										"type": "null"
									},
									"TargetDate": {
										"type": "null"
									},
									"ParentWorkItemId": {
										"type": "integer"
									},
									"TagNames": {
										"type": "null"
									},
									"StateCategory": {
										"type": "string"
									},
									"AutomatedTestId": {
										"type": "null"
									},
									"AutomatedTestName": {
										"type": "null"
									},
									"AutomatedTestStorage": {
										"type": "null"
									},
									"AutomatedTestType": {
										"type": "null"
									},
									"AutomationStatus": {
										"type": "null"
									},
									"StateChangeDate": {
										"type": "string"
									},
									"Count": {
										"type": "integer"
									},
									"CommentCount": {
										"type": "integer"
									},
									"Microsoft_VSTS_CodeReview_AcceptedBySK": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_AcceptedDate": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosedStatus": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosedStatusCode": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosingComment": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_Context": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextCode": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextOwner": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextType": {
										"type": "null"
									},
									"Microsoft_VSTS_Common_ReviewedBySK": {
										"type": "null"
									},
									"Microsoft_VSTS_Common_StateCode": {
										"type": "null"
									},
									"Microsoft_VSTS_Feedback_ApplicationType": {
										"type": "null"
									},
									"Microsoft_VSTS_TCM_TestSuiteType": {
										"type": "null"
									},
									"Microsoft_VSTS_TCM_TestSuiteTypeId": {
										"type": "null"
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/TransformADOData')]",
			"type": "Microsoft.DataFactory/factories/dataflows",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "MappingDataFlow",
				"typeProperties": {
					"sources": [
						{
							"dataset": {
								"referenceName": "ADOWorkItemJsonTest",
								"type": "DatasetReference"
							},
							"name": "ADOBugsJson"
						},
						{
							"dataset": {
								"referenceName": "ADOWorkItemJsonTest",
								"type": "DatasetReference"
							},
							"name": "ADOTasksJsonData"
						},
						{
							"dataset": {
								"referenceName": "ADOWorkItemJsonTest",
								"type": "DatasetReference"
							},
							"name": "ADOFeaturesJsonData"
						},
						{
							"dataset": {
								"referenceName": "ADOWorkItemJsonTest",
								"type": "DatasetReference"
							},
							"name": "ADOUserStoryJsonData"
						},
						{
							"dataset": {
								"referenceName": "GitJsonDataADOTest",
								"type": "DatasetReference"
							},
							"name": "ADOGitJsonData"
						},
						{
							"dataset": {
								"referenceName": "ADOUserJsonDataTest",
								"type": "DatasetReference"
							},
							"name": "ADOUserData"
						},
						{
							"dataset": {
								"referenceName": "ActivityMasterData",
								"type": "DatasetReference"
							},
							"name": "ActivityData"
						},
						{
							"dataset": {
								"referenceName": "EmployeeMasterDataSet",
								"type": "DatasetReference"
							},
							"name": "EmployeeData"
						},
						{
							"dataset": {
								"referenceName": "EmployeeActivityDataSet",
								"type": "DatasetReference"
							},
							"name": "EmployeeActvityData"
						}
					],
					"sinks": [
						{
							"dataset": {
								"referenceName": "EmployeeActivityDataSink",
								"type": "DatasetReference"
							},
							"name": "UpdateValuesToEmployeeActivtyTable"
						}
					],
					"transformations": [
						{
							"name": "Flattenthevauearray"
						},
						{
							"name": "FlattenTheTaskValueArray"
						},
						{
							"name": "FlattenTheFeatureValueArray"
						},
						{
							"name": "FlattenTheUserStoryValueArray"
						},
						{
							"name": "UnpivotBugs"
						},
						{
							"name": "FlattenTGeGItJson"
						},
						{
							"name": "FLattenTheADOUserJsonData"
						},
						{
							"name": "Join1"
						},
						{
							"name": "Select1"
						},
						{
							"name": "UnpivotGitData"
						},
						{
							"name": "UnpivotTasks"
						},
						{
							"name": "UnpivotFeatures"
						},
						{
							"name": "UnpivotUserStory"
						},
						{
							"name": "CombineAllWorkItems"
						},
						{
							"name": "FilterOutAlltheNullValues"
						},
						{
							"name": "DerivedColumn1"
						},
						{
							"name": "ExtractActivityID"
						},
						{
							"name": "SelectWIthActivityID"
						},
						{
							"name": "SelectEmployeeIDAndUserSK"
						},
						{
							"name": "JoinWithEmployee"
						},
						{
							"name": "SelectTheRequiredColumns"
						},
						{
							"name": "UpdatetheEmplyeeActivityTable"
						},
						{
							"name": "Sort1"
						},
						{
							"name": "AggregateTheActivityValueForBugs"
						},
						{
							"name": "AlterRow1"
						},
						{
							"name": "AggregateTheActivityValueForTasks"
						},
						{
							"name": "AggregateTheActivityValueForFeatures"
						},
						{
							"name": "AggregateTheActivityValueForUserStory"
						},
						{
							"name": "AggregateTheActivityValueForGit"
						},
						{
							"name": "ConvertActivatedDateToDate"
						},
						{
							"name": "ConvertActivateDateToDate"
						},
						{
							"name": "ConvertFeatureActivateDateToDate"
						},
						{
							"name": "ConvertUserStoryActivatedDateToDate"
						},
						{
							"name": "ConvertTheGItActivatedDateToDate"
						}
					],
					"script": "source(output(\n\t\tvalue as (WorkItemId as string, InProgressDate as string, CompletedDate as string, LeadTimeDays as double, CycleTimeDays as double, InProgressDateSK as string, CompletedDateSK as string, AnalyticsUpdatedDate as string, ProjectSK as string, WorkItemRevisionSK as string, AreaSK as string, IterationSK as string, AssignedToUserSK as string, ChangedByUserSK as string, CreatedByUserSK as string, ActivatedByUserSK as string, ClosedByUserSK as string, ResolvedByUserSK as string, ActivatedDateSK as string, ChangedDateSK as string, ClosedDateSK as string, CreatedDateSK as string, ResolvedDateSK as string, StateChangeDateSK as string, Revision as string, Watermark as string, Title as string, WorkItemType as string, ChangedDate as string, CreatedDate as string, State as string, Reason as string, FoundIn as string, IntegrationBuild as string, ActivatedDate as string, Activity as string, BusinessValue as string, ClosedDate as string, Issue as string, Priority as string, Rating as string, ResolvedDate as string, ResolvedReason as string, Risk as string, Severity as string, StackRank as string, TimeCriticality as string, ValueArea as string, CompletedWork as string, DueDate as string, Effort as string, FinishDate as string, OriginalEstimate as string, RemainingWork as string, StartDate as string, StoryPoints as string, TargetDate as string, ParentWorkItemId as string, TagNames as string, StateCategory as string, AutomatedTestId as string, AutomatedTestName as string, AutomatedTestStorage as string, AutomatedTestType as string, AutomationStatus as string, StateChangeDate as string, Count as string, CommentCount as string, Microsoft_VSTS_CodeReview_AcceptedBySK as string, Microsoft_VSTS_CodeReview_AcceptedDate as string, Microsoft_VSTS_CodeReview_ClosedStatus as string, Microsoft_VSTS_CodeReview_ClosedStatusCode as string, Microsoft_VSTS_CodeReview_ClosingComment as string, Microsoft_VSTS_CodeReview_Context as string, Microsoft_VSTS_CodeReview_ContextCode as string, Microsoft_VSTS_CodeReview_ContextOwner as string, Microsoft_VSTS_CodeReview_ContextType as string, Microsoft_VSTS_Common_ReviewedBySK as string, Microsoft_VSTS_Common_StateCode as string, Microsoft_VSTS_Feedback_ApplicationType as string, Microsoft_VSTS_TCM_TestSuiteType as string, Microsoft_VSTS_TCM_TestSuiteTypeId as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine',\n\tpartitionBy('hash', 1)) ~> ADOBugsJson\nsource(output(\n\t\tvalue as (WorkItemId as string, InProgressDate as string, CompletedDate as string, LeadTimeDays as double, CycleTimeDays as double, InProgressDateSK as string, CompletedDateSK as string, AnalyticsUpdatedDate as string, ProjectSK as string, WorkItemRevisionSK as string, AreaSK as string, IterationSK as string, AssignedToUserSK as string, ChangedByUserSK as string, CreatedByUserSK as string, ActivatedByUserSK as string, ClosedByUserSK as string, ResolvedByUserSK as string, ActivatedDateSK as string, ChangedDateSK as string, ClosedDateSK as string, CreatedDateSK as string, ResolvedDateSK as string, StateChangeDateSK as string, Revision as string, Watermark as string, Title as string, WorkItemType as string, ChangedDate as string, CreatedDate as string, State as string, Reason as string, FoundIn as string, IntegrationBuild as string, ActivatedDate as string, Activity as string, BusinessValue as string, ClosedDate as string, Issue as string, Priority as string, Rating as string, ResolvedDate as string, ResolvedReason as string, Risk as string, Severity as string, StackRank as string, TimeCriticality as string, ValueArea as string, CompletedWork as string, DueDate as string, Effort as string, FinishDate as string, OriginalEstimate as string, RemainingWork as string, StartDate as string, StoryPoints as string, TargetDate as string, ParentWorkItemId as string, TagNames as string, StateCategory as string, AutomatedTestId as string, AutomatedTestName as string, AutomatedTestStorage as string, AutomatedTestType as string, AutomationStatus as string, StateChangeDate as string, Count as string, CommentCount as string, Microsoft_VSTS_CodeReview_AcceptedBySK as string, Microsoft_VSTS_CodeReview_AcceptedDate as string, Microsoft_VSTS_CodeReview_ClosedStatus as string, Microsoft_VSTS_CodeReview_ClosedStatusCode as string, Microsoft_VSTS_CodeReview_ClosingComment as string, Microsoft_VSTS_CodeReview_Context as string, Microsoft_VSTS_CodeReview_ContextCode as string, Microsoft_VSTS_CodeReview_ContextOwner as string, Microsoft_VSTS_CodeReview_ContextType as string, Microsoft_VSTS_Common_ReviewedBySK as string, Microsoft_VSTS_Common_StateCode as string, Microsoft_VSTS_Feedback_ApplicationType as string, Microsoft_VSTS_TCM_TestSuiteType as string, Microsoft_VSTS_TCM_TestSuiteTypeId as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine',\n\tpartitionBy('hash', 1)) ~> ADOTasksJsonData\nsource(output(\n\t\tvalue as (WorkItemId as string, InProgressDate as string, CompletedDate as string, LeadTimeDays as double, CycleTimeDays as double, InProgressDateSK as string, CompletedDateSK as string, AnalyticsUpdatedDate as string, ProjectSK as string, WorkItemRevisionSK as string, AreaSK as string, IterationSK as string, AssignedToUserSK as string, ChangedByUserSK as string, CreatedByUserSK as string, ActivatedByUserSK as string, ClosedByUserSK as string, ResolvedByUserSK as string, ActivatedDateSK as string, ChangedDateSK as string, ClosedDateSK as string, CreatedDateSK as string, ResolvedDateSK as string, StateChangeDateSK as string, Revision as string, Watermark as string, Title as string, WorkItemType as string, ChangedDate as string, CreatedDate as string, State as string, Reason as string, FoundIn as string, IntegrationBuild as string, ActivatedDate as string, Activity as string, BusinessValue as string, ClosedDate as string, Issue as string, Priority as string, Rating as string, ResolvedDate as string, ResolvedReason as string, Risk as string, Severity as string, StackRank as string, TimeCriticality as string, ValueArea as string, CompletedWork as string, DueDate as string, Effort as string, FinishDate as string, OriginalEstimate as string, RemainingWork as string, StartDate as string, StoryPoints as string, TargetDate as string, ParentWorkItemId as string, TagNames as string, StateCategory as string, AutomatedTestId as string, AutomatedTestName as string, AutomatedTestStorage as string, AutomatedTestType as string, AutomationStatus as string, StateChangeDate as string, Count as string, CommentCount as string, Microsoft_VSTS_CodeReview_AcceptedBySK as string, Microsoft_VSTS_CodeReview_AcceptedDate as string, Microsoft_VSTS_CodeReview_ClosedStatus as string, Microsoft_VSTS_CodeReview_ClosedStatusCode as string, Microsoft_VSTS_CodeReview_ClosingComment as string, Microsoft_VSTS_CodeReview_Context as string, Microsoft_VSTS_CodeReview_ContextCode as string, Microsoft_VSTS_CodeReview_ContextOwner as string, Microsoft_VSTS_CodeReview_ContextType as string, Microsoft_VSTS_Common_ReviewedBySK as string, Microsoft_VSTS_Common_StateCode as string, Microsoft_VSTS_Feedback_ApplicationType as string, Microsoft_VSTS_TCM_TestSuiteType as string, Microsoft_VSTS_TCM_TestSuiteTypeId as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine',\n\tpartitionBy('hash', 1)) ~> ADOFeaturesJsonData\nsource(output(\n\t\tvalue as (WorkItemId as string, InProgressDate as string, CompletedDate as string, LeadTimeDays as double, CycleTimeDays as double, InProgressDateSK as string, CompletedDateSK as string, AnalyticsUpdatedDate as string, ProjectSK as string, WorkItemRevisionSK as string, AreaSK as string, IterationSK as string, AssignedToUserSK as string, ChangedByUserSK as string, CreatedByUserSK as string, ActivatedByUserSK as string, ClosedByUserSK as string, ResolvedByUserSK as string, ActivatedDateSK as string, ChangedDateSK as string, ClosedDateSK as string, CreatedDateSK as string, ResolvedDateSK as string, StateChangeDateSK as string, Revision as string, Watermark as string, Title as string, WorkItemType as string, ChangedDate as string, CreatedDate as string, State as string, Reason as string, FoundIn as string, IntegrationBuild as string, ActivatedDate as string, Activity as string, BusinessValue as string, ClosedDate as string, Issue as string, Priority as string, Rating as string, ResolvedDate as string, ResolvedReason as string, Risk as string, Severity as string, StackRank as string, TimeCriticality as string, ValueArea as string, CompletedWork as string, DueDate as string, Effort as string, FinishDate as string, OriginalEstimate as string, RemainingWork as string, StartDate as string, StoryPoints as string, TargetDate as string, ParentWorkItemId as string, TagNames as string, StateCategory as string, AutomatedTestId as string, AutomatedTestName as string, AutomatedTestStorage as string, AutomatedTestType as string, AutomationStatus as string, StateChangeDate as string, Count as string, CommentCount as string, Microsoft_VSTS_CodeReview_AcceptedBySK as string, Microsoft_VSTS_CodeReview_AcceptedDate as string, Microsoft_VSTS_CodeReview_ClosedStatus as string, Microsoft_VSTS_CodeReview_ClosedStatusCode as string, Microsoft_VSTS_CodeReview_ClosingComment as string, Microsoft_VSTS_CodeReview_Context as string, Microsoft_VSTS_CodeReview_ContextCode as string, Microsoft_VSTS_CodeReview_ContextOwner as string, Microsoft_VSTS_CodeReview_ContextType as string, Microsoft_VSTS_Common_ReviewedBySK as string, Microsoft_VSTS_Common_StateCode as string, Microsoft_VSTS_Feedback_ApplicationType as string, Microsoft_VSTS_TCM_TestSuiteType as string, Microsoft_VSTS_TCM_TestSuiteTypeId as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine') ~> ADOUserStoryJsonData\nsource(output(\n\t\tvalue as (commitId as string, author as (name as string, email as string, date as string), committer as (name as string, email as string, date as string), comment as string, changeCounts as (Add as string, Edit as string, Delete as string), url as string, remoteUrl as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine',\n\tpartitionBy('hash', 1)) ~> ADOGitJsonData\nsource(output(\n\t\tvalue as (UserSK as string, UserId as string, UserName as string, UserEmail as string, AnalyticsUpdatedDate as string, GitHubUserId as string, UserType as string)[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine',\n\tpartitionBy('hash', 1)) ~> ADOUserData\nsource(output(\n\t\tActivityId as integer,\n\t\tActivityName as string,\n\t\tActivityDescription as string,\n\t\tActivityTypeId as integer\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tformat: 'table',\n\tstaged: false,\n\tpartitionBy('hash', 1)) ~> ActivityData\nsource(output(\n\t\tEmployeeId as integer,\n\t\tWPAEmployeeId as string,\n\t\tWPAEmployeeName as string,\n\t\tEmployeeHireDate as timestamp,\n\t\tOrganization as string,\n\t\tLevelDesignation as string,\n\t\tFunctionType as string,\n\t\tRegion as string,\n\t\tLayer as string,\n\t\tIsInternal as string,\n\t\tSupervisorIndicator as string,\n\t\tNumber_of_directs as string,\n\t\tADOUserSK as string,\n\t\tADOUserId as string,\n\t\tADOUserEmail as string,\n\t\tADOUserName as string\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tformat: 'table',\n\tstaged: false,\n\tpartitionBy('hash', 1)) ~> EmployeeData\nsource(output(\n\t\tEmployeeId as integer,\n\t\tActivityId as integer,\n\t\tDate as date,\n\t\tDateKey as integer,\n\t\tActivityValue as double\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tformat: 'table',\n\tstaged: false,\n\tpartitionBy('hash', 1)) ~> EmployeeActvityData\nADOBugsJson foldDown(unroll(value),\n\tmapColumn(\n\t\tAssignedToUserSK = value.AssignedToUserSK,\n\t\tActivatedDate = value.ActivatedDate,\n\t\tBug_Count = value.Count\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> Flattenthevauearray\nADOTasksJsonData foldDown(unroll(value),\n\tmapColumn(\n\t\tAssignedToUserSK = value.AssignedToUserSK,\n\t\tActivatedDate = value.ActivatedDate,\n\t\tTask_Count = value.Count\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> FlattenTheTaskValueArray\nADOFeaturesJsonData foldDown(unroll(value),\n\tmapColumn(\n\t\tAssignedToUserSK = value.AssignedToUserSK,\n\t\tActivatedDate = value.ActivatedDate,\n\t\tFeature_Count = value.Count\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> FlattenTheFeatureValueArray\nADOUserStoryJsonData foldDown(unroll(value),\n\tmapColumn(\n\t\tAssignedToUserSK = value.AssignedToUserSK,\n\t\tActivatedDate = value.ActivatedDate,\n\t\tUser_Story_Story_Points = value.StoryPoints,\n\t\tUser_Story_Count = value.Count\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> FlattenTheUserStoryValueArray\nConvertActivatedDateToDate unpivot(output(\n\t\tActivityDesc as string,\n\t\t{ ActivityValue} as string\n\t),\n\tungroupBy(AssignedToUserSK,\n\t\tActivatedDate),\n\tlateral: false,\n\tignoreNullPivots: false,\n\tpartitionBy('hash', 1)) ~> UnpivotBugs\nADOGitJsonData foldDown(unroll(value),\n\tmapColumn(\n\t\tcommitId = value.commitId,\n\t\temail = value.committer.email,\n\t\tdate = value.committer.date,\n\t\tGit_Commit_Add = value.changeCounts.Add,\n\t\tGit_Commit_Edit = value.changeCounts.Edit,\n\t\tGit_Commit_Delete = value.changeCounts.Delete\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> FlattenTGeGItJson\nADOUserData foldDown(unroll(value),\n\tmapColumn(\n\t\tUserSK = value.UserSK,\n\t\tUserId = value.UserId,\n\t\tUserName = value.UserName,\n\t\tUserEmail = value.UserEmail\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> FLattenTheADOUserJsonData\nFlattenTGeGItJson, FLattenTheADOUserJsonData join(email == UserEmail,\n\tjoinType:'inner',\n\tpartitionBy('hash', 1),\n\tbroadcast: 'auto')~> Join1\nJoin1 select(mapColumn(\n\t\tAssignedToUserSK = UserSK,\n\t\tActivatedDate = date,\n\t\tGit_Commit_Add,\n\t\tGit_Commit_Edit,\n\t\tGit_Commit_Delete\n\t),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> Select1\nConvertTheGItActivatedDateToDate unpivot(output(\n\t\tActivityDesc as string,\n\t\tAcivityValue as string\n\t),\n\tungroupBy(AssignedToUserSK,\n\t\tActivatedDate),\n\tlateral: false,\n\tignoreNullPivots: false,\n\tpartitionBy('hash', 1)) ~> UnpivotGitData\nConvertActivateDateToDate unpivot(output(\n\t\tActivityDesc as string,\n\t\tActivityValue as string\n\t),\n\tungroupBy(AssignedToUserSK,\n\t\tActivatedDate),\n\tlateral: false,\n\tignoreNullPivots: true,\n\tpartitionBy('hash', 1)) ~> UnpivotTasks\nConvertFeatureActivateDateToDate unpivot(output(\n\t\tActivityDesc as string,\n\t\tActivityValue as string\n\t),\n\tungroupBy(AssignedToUserSK,\n\t\tActivatedDate),\n\tlateral: false,\n\tignoreNullPivots: true,\n\tpartitionBy('hash', 1)) ~> UnpivotFeatures\nConvertUserStoryActivatedDateToDate unpivot(output(\n\t\tActivityDesc as string,\n\t\tActivityValue as string\n\t),\n\tungroupBy(AssignedToUserSK,\n\t\tActivatedDate),\n\tlateral: false,\n\tignoreNullPivots: true,\n\tpartitionBy('hash', 1)) ~> UnpivotUserStory\nAggregateTheActivityValueForFeatures, AggregateTheActivityValueForGit, AggregateTheActivityValueForBugs, AggregateTheActivityValueForTasks, AggregateTheActivityValueForUserStory union(byName: false,\n\tpartitionBy('hash', 1))~> CombineAllWorkItems\nCombineAllWorkItems filter(not(isNull(AssignedToUserSK)) && not(isNull(ActivatedDate)),\n\tpartitionBy('hash', 1)) ~> FilterOutAlltheNullValues\nFilterOutAlltheNullValues derive(DateKey = toInteger(replace(toString(ActivatedDate),'-','')),\n\t\tActivityValue = toInteger(ActivityValue)) ~> DerivedColumn1\nDerivedColumn1, ActivityData join(ActivityDesc == ActivityName,\n\tjoinType:'left',\n\tbroadcast: 'auto')~> ExtractActivityID\nExtractActivityID select(mapColumn(\n\t\tAssignedToUserSK,\n\t\tActivityId,\n\t\tDateKey,\n\t\tActivityValue,\n\t\tDate = ActivatedDate\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> SelectWIthActivityID\nEmployeeData select(mapColumn(\n\t\tEmployeeId,\n\t\tADOUserSK\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> SelectEmployeeIDAndUserSK\nSelectWIthActivityID, SelectEmployeeIDAndUserSK join(AssignedToUserSK == ADOUserSK,\n\tjoinType:'inner',\n\tbroadcast: 'auto')~> JoinWithEmployee\nJoinWithEmployee select(mapColumn(\n\t\tEmployeeId,\n\t\tActivityId,\n\t\tDate,\n\t\tDateKey,\n\t\tActivityValue\n\t),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> SelectTheRequiredColumns\nSort1, EmployeeActvityData exists(SelectTheRequiredColumns@EmployeeId == EmployeeActvityData@EmployeeId\n\t&& SelectTheRequiredColumns@DateKey == EmployeeActvityData@DateKey\n\t&& SelectTheRequiredColumns@ActivityId == EmployeeActvityData@ActivityId\n\t&& SelectTheRequiredColumns@ActivityValue == EmployeeActvityData@ActivityValue,\n\tnegate:true,\n\tpartitionBy('hash', 1),\n\tbroadcast: 'auto')~> UpdatetheEmplyeeActivityTable\nSelectTheRequiredColumns sort(asc(EmployeeId, true),\n\tasc(ActivityId, true),\n\tasc(DateKey, true),\n\tpartitionBy('hash', 1)) ~> Sort1\nUnpivotBugs aggregate(groupBy(AssignedToUserSK,\n\t\tActivatedDate,\n\t\tActivityDesc),\n\t{ ActivityValue} = sum(toInteger({ ActivityValue})),\n\tpartitionBy('hash', 1)) ~> AggregateTheActivityValueForBugs\nUpdatetheEmplyeeActivityTable alterRow(upsertIf(ActivityValue>=1)) ~> AlterRow1\nUnpivotTasks aggregate(groupBy(AssignedToUserSK,\n\t\tActivatedDate,\n\t\tActivityDesc),\n\tActivityValue = sum(toInteger(ActivityValue))) ~> AggregateTheActivityValueForTasks\nUnpivotFeatures aggregate(groupBy(AssignedToUserSK,\n\t\tActivatedDate,\n\t\tActivityDesc),\n\tActivityValue = sum(toInteger(ActivityValue))) ~> AggregateTheActivityValueForFeatures\nUnpivotUserStory aggregate(groupBy(AssignedToUserSK,\n\t\tActivatedDate,\n\t\tActivityDesc),\n\tActivityValue = sum(toInteger(ActivityValue))) ~> AggregateTheActivityValueForUserStory\nUnpivotGitData aggregate(groupBy(AssignedToUserSK,\n\t\tActivatedDate,\n\t\tActivityDesc),\n\tAcivityValue = sum(toInteger(AcivityValue))) ~> AggregateTheActivityValueForGit\nFlattenthevauearray derive(ActivatedDate = toDate(ActivatedDate,'yyyy-MM-dd')) ~> ConvertActivatedDateToDate\nFlattenTheTaskValueArray derive(ActivatedDate = toDate(ActivatedDate,'yyyy-MM-dd')) ~> ConvertActivateDateToDate\nFlattenTheFeatureValueArray derive(ActivatedDate = toDate(ActivatedDate,'yyyy-MM-dd')) ~> ConvertFeatureActivateDateToDate\nFlattenTheUserStoryValueArray derive(ActivatedDate = toDate(ActivatedDate,'yyyy-MM-dd')) ~> ConvertUserStoryActivatedDateToDate\nSelect1 derive(ActivatedDate = toDate(ActivatedDate,'yyyy-MM-dd')) ~> ConvertTheGItActivatedDateToDate\nAlterRow1 sink(input(\n\t\tEmployeeId as integer,\n\t\tActivityId as integer,\n\t\tDate as date,\n\t\tDateKey as integer,\n\t\tActivityValue as double\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:true,\n\tkeys:['EmployeeId','ActivityId','DateKey'],\n\tformat: 'table',\n\tstaged: true,\n\tallowCopyCommand: true,\n\tmapColumn(\n\t\tEmployeeId,\n\t\tActivityId,\n\t\tDate,\n\t\tDateKey,\n\t\tActivityValue\n\t),\n\tpartitionBy('hash', 1),\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true) ~> UpdateValuesToEmployeeActivtyTable"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/datasets/ADOWorkItemJsonTest')]",
				"[concat(variables('factoryId'), '/datasets/GitJsonDataADOTest')]",
				"[concat(variables('factoryId'), '/datasets/ADOUserJsonDataTest')]",
				"[concat(variables('factoryId'), '/datasets/ActivityMasterData')]",
				"[concat(variables('factoryId'), '/datasets/EmployeeMasterDataSet')]",
				"[concat(variables('factoryId'), '/datasets/EmployeeActivityDataSet')]",
				"[concat(variables('factoryId'), '/datasets/EmployeeActivityDataSink')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/ADOUserDataSet')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('LinkToADO')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {
					"relativeUrl": "Users?"
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/GetGItJsonData')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('LinkToGit')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ADOWorkItemJsonTest')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('ClassificationADLS')]",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"WorkItemType": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat(dataset().WorkItemType,'Data.json')",
							"type": "Expression"
						},
						"folderPath": "raw_test",
						"fileSystem": "wpawkspfs2"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"value": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"WorkItemId": {
										"type": "integer"
									},
									"InProgressDate": {
										"type": "string"
									},
									"CompletedDate": {
										"type": "string"
									},
									"LeadTimeDays": {
										"type": "number"
									},
									"CycleTimeDays": {
										"type": "number"
									},
									"InProgressDateSK": {
										"type": "integer"
									},
									"CompletedDateSK": {
										"type": "integer"
									},
									"AnalyticsUpdatedDate": {
										"type": "string"
									},
									"ProjectSK": {
										"type": "string"
									},
									"WorkItemRevisionSK": {
										"type": "integer"
									},
									"AreaSK": {
										"type": "string"
									},
									"IterationSK": {
										"type": "string"
									},
									"AssignedToUserSK": {
										"type": "string"
									},
									"ChangedByUserSK": {
										"type": "string"
									},
									"CreatedByUserSK": {
										"type": "string"
									},
									"ActivatedByUserSK": {
										"type": "string"
									},
									"ClosedByUserSK": {
										"type": "string"
									},
									"ResolvedByUserSK": {
										"type": "string"
									},
									"ActivatedDateSK": {
										"type": "integer"
									},
									"ChangedDateSK": {
										"type": "integer"
									},
									"ClosedDateSK": {
										"type": "integer"
									},
									"CreatedDateSK": {
										"type": "integer"
									},
									"ResolvedDateSK": {
										"type": "integer"
									},
									"StateChangeDateSK": {
										"type": "integer"
									},
									"Revision": {
										"type": "integer"
									},
									"Watermark": {
										"type": "integer"
									},
									"Title": {
										"type": "string"
									},
									"WorkItemType": {
										"type": "string"
									},
									"ChangedDate": {
										"type": "string"
									},
									"CreatedDate": {
										"type": "string"
									},
									"State": {
										"type": "string"
									},
									"Reason": {
										"type": "string"
									},
									"FoundIn": {
										"type": "null"
									},
									"IntegrationBuild": {
										"type": "null"
									},
									"ActivatedDate": {
										"type": "string"
									},
									"Activity": {
										"type": "null"
									},
									"BusinessValue": {
										"type": "null"
									},
									"ClosedDate": {
										"type": "string"
									},
									"Issue": {
										"type": "null"
									},
									"Priority": {
										"type": "integer"
									},
									"Rating": {
										"type": "null"
									},
									"ResolvedDate": {
										"type": "string"
									},
									"ResolvedReason": {
										"type": "string"
									},
									"Risk": {
										"type": "null"
									},
									"Severity": {
										"type": "string"
									},
									"StackRank": {
										"type": "null"
									},
									"TimeCriticality": {
										"type": "null"
									},
									"ValueArea": {
										"type": "string"
									},
									"CompletedWork": {
										"type": "null"
									},
									"DueDate": {
										"type": "null"
									},
									"Effort": {
										"type": "null"
									},
									"FinishDate": {
										"type": "null"
									},
									"OriginalEstimate": {
										"type": "null"
									},
									"RemainingWork": {
										"type": "null"
									},
									"StartDate": {
										"type": "null"
									},
									"StoryPoints": {
										"type": "null"
									},
									"TargetDate": {
										"type": "null"
									},
									"ParentWorkItemId": {
										"type": "integer"
									},
									"TagNames": {
										"type": "null"
									},
									"StateCategory": {
										"type": "string"
									},
									"AutomatedTestId": {
										"type": "null"
									},
									"AutomatedTestName": {
										"type": "null"
									},
									"AutomatedTestStorage": {
										"type": "null"
									},
									"AutomatedTestType": {
										"type": "null"
									},
									"AutomationStatus": {
										"type": "null"
									},
									"StateChangeDate": {
										"type": "string"
									},
									"Count": {
										"type": "integer"
									},
									"CommentCount": {
										"type": "integer"
									},
									"Microsoft_VSTS_CodeReview_AcceptedBySK": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_AcceptedDate": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosedStatus": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosedStatusCode": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ClosingComment": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_Context": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextCode": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextOwner": {
										"type": "null"
									},
									"Microsoft_VSTS_CodeReview_ContextType": {
										"type": "null"
									},
									"Microsoft_VSTS_Common_ReviewedBySK": {
										"type": "null"
									},
									"Microsoft_VSTS_Common_StateCode": {
										"type": "null"
									},
									"Microsoft_VSTS_Feedback_ApplicationType": {
										"type": "null"
									},
									"Microsoft_VSTS_TCM_TestSuiteType": {
										"type": "null"
									},
									"Microsoft_VSTS_TCM_TestSuiteTypeId": {
										"type": "null"
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/GitJsonDataADOTest')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('ClassificationADLS')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "GitData.json",
						"folderPath": "raw_test",
						"fileSystem": "wpawkspfs2"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"value": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"commitId": {
										"type": "string"
									},
									"author": {
										"type": "object",
										"properties": {
											"name": {
												"type": "string"
											},
											"email": {
												"type": "string"
											},
											"date": {
												"type": "string"
											}
										}
									},
									"committer": {
										"type": "object",
										"properties": {
											"name": {
												"type": "string"
											},
											"email": {
												"type": "string"
											},
											"date": {
												"type": "string"
											}
										}
									},
									"comment": {
										"type": "string"
									},
									"changeCounts": {
										"type": "object",
										"properties": {
											"Add": {
												"type": "integer"
											},
											"Edit": {
												"type": "integer"
											},
											"Delete": {
												"type": "integer"
											}
										}
									},
									"url": {
										"type": "string"
									},
									"remoteUrl": {
										"type": "string"
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ADOUserJsonDataTest')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('ClassificationADLS')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "UserData.json",
						"folderPath": "raw_test",
						"fileSystem": "wpawkspfs2"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"value": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"UserSK": {
										"type": "string"
									},
									"UserId": {
										"type": "string"
									},
									"UserName": {
										"type": "string"
									},
									"UserEmail": {
										"type": "string"
									},
									"AnalyticsUpdatedDate": {
										"type": "string"
									},
									"GitHubUserId": {
										"type": "null"
									},
									"UserType": {
										"type": "null"
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ActivityMasterData')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('AzureSynapseAnalyticsSQLPool')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "ActivityId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "ActivityName",
						"type": "nvarchar"
					},
					{
						"name": "ActivityDescription",
						"type": "nvarchar"
					},
					{
						"name": "ActivityTypeId",
						"type": "int",
						"precision": 10
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Activity"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/EmployeeMasterDataSet')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('AzureSynapseAnalyticsSQLPool')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "EmployeeId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "WPAEmployeeId",
						"type": "nvarchar"
					},
					{
						"name": "WPAEmployeeName",
						"type": "nvarchar"
					},
					{
						"name": "EmployeeHireDate",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "Organization",
						"type": "nvarchar"
					},
					{
						"name": "LevelDesignation",
						"type": "nvarchar"
					},
					{
						"name": "FunctionType",
						"type": "nvarchar"
					},
					{
						"name": "Region",
						"type": "nvarchar"
					},
					{
						"name": "Layer",
						"type": "nvarchar"
					},
					{
						"name": "IsInternal",
						"type": "nvarchar"
					},
					{
						"name": "SupervisorIndicator",
						"type": "nvarchar"
					},
					{
						"name": "Number_of_directs",
						"type": "nvarchar"
					},
					{
						"name": "ADOUserSK",
						"type": "nvarchar"
					},
					{
						"name": "ADOUserId",
						"type": "nvarchar"
					},
					{
						"name": "ADOUserEmail",
						"type": "nvarchar"
					},
					{
						"name": "ADOUserName",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Employee"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/EmployeeActivityDataSet')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('AzureSynapseAnalyticsSQLPool')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "EmployeeId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "ActivityId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Date",
						"type": "date"
					},
					{
						"name": "DateKey",
						"type": "int",
						"precision": 10
					},
					{
						"name": "ActivityValue",
						"type": "float",
						"precision": 15
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "EmployeeActivity"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/EmployeeActivityDataSink')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "[parameters('AzureSynapseAnalyticsSQLPool')]",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "EmployeeId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "ActivityId",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Date",
						"type": "date"
					},
					{
						"name": "DateKey",
						"type": "int",
						"precision": 10
					},
					{
						"name": "ActivityValue",
						"type": "float",
						"precision": 15
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "EmployeeActivity"
				}
			},
			"dependsOn": []
		}
	]
}